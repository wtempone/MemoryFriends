{"version":3,"sources":["../../src/pages/main-menu/main-menu.module.ts","../../src/components/invite-user-card/invite-user-card.ts","../../src/pages/main-menu/main-menu.ts"],"names":[],"mappings":"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","file":"1.js","sourcesContent":["import { InviteUserCardComponent } from './../../components/invite-user-card/invite-user-card';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\n\r\nimport { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { MainMenuPage } from './main-menu';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    MainMenuPage,\r\n    InviteUserCardComponent\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(MainMenuPage),\r\n    TranslateModule.forChild()\r\n    \r\n  ],\r\n  exports: [\r\n    MainMenuPage\r\n  ]\r\n})\r\nexport class MainMenuPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/main-menu/main-menu.module.ts","import { Friend } from './../../providers/database/models/game-session';\r\nimport { Component, Output, EventEmitter } from '@angular/core';\r\n\r\n@Component({\r\n  inputs: ['user:user','disabled:disabled'],\r\n  selector: 'invite-user-card',\r\n  templateUrl: 'invite-user-card.html',\r\n})\r\nexport class InviteUserCardComponent {\r\n  @Output() selectCard = new EventEmitter();\r\n  user: Friend;\r\n  disabled: boolean;\r\n  constructor() {\r\n\r\n  }\r\n  select() {\r\n    if (this.disabled) return;\r\n    this.selectCard.emit(this.user.selected);    \r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/invite-user-card/invite-user-card.ts","import { Friend } from './../../providers/database/models/game-session';\r\nimport { AuthServiceProvider } from './../../providers/auth-service';\r\nimport { AngularFireDatabase } from 'angularfire2/database';\r\nimport { Component, ViewChild } from '@angular/core';\r\nimport { Validators, FormBuilder, FormGroup } from '@angular/forms';\r\nimport { NavController, AlertController, ViewController, IonicPage, ToastController } from 'ionic-angular';\r\nimport { TranslateService } from '@ngx-translate/core';\r\n\r\nimport { Camera } from '@ionic-native/camera';\r\nimport { User, Invite, UserService } from '../../providers/database/database-providers';\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-main-menu',\r\n  templateUrl: 'main-menu.html',\r\n})\r\nexport class MainMenuPage {\r\n  @ViewChild('fileInput') fileInput;\r\n  form: FormGroup;\r\n\r\n  constructor(public navCtrl: NavController,\r\n    public viewCtrl: ViewController,\r\n    formBuilder: FormBuilder,\r\n    public camera: Camera,\r\n    public alertController: AlertController,\r\n    private translate: TranslateService,\r\n    public userSrvc: UserService,\r\n    private authSrvc: AuthServiceProvider,\r\n    private toast: ToastController\r\n  ) {\r\n    if (userSrvc.currentUser) {      \r\n      this.userSrvc.loadFriends();\r\n      this.userSrvc.startListenerInvites();      \r\n    }\r\n  }\r\n\r\n  sendInvite(inviteUser: Friend) {\r\n    this.translate.get([\r\n      \"DO_YOU_ENVITE_A_FRIEND\",\r\n      \"DO_YOU_ENVITE_A_FRIEND_MESSAGE\",\r\n      \"SEND_BUTTON\",\r\n      \"CANCEL_BUTTON\"]\r\n      , { value: inviteUser.name }).subscribe(\r\n      (values) => {\r\n        let confirm = this.alertController.create({\r\n          title: values.DO_YOU_ENVITE_A_FRIEND,\r\n          message: values.DO_YOU_ENVITE_A_FRIEND_MESSAGE,\r\n          buttons: [\r\n            {\r\n              text: values.CANCEL_BUTTON\r\n            },\r\n            {\r\n              text: values.SEND_BUTTON,\r\n              handler: () => {\r\n                let toUser: User = {\r\n                  facebookId: inviteUser.id,\r\n                  name: inviteUser.name,\r\n                  profilePic: inviteUser.picture\r\n                };\r\n                let invite:Invite = {\r\n                  fromUser: this.userSrvc.currentUser,\r\n                  toUser: toUser\r\n                }\r\n                this.userSrvc.sendEnvite(invite).catch(error => this.handleError(error));\r\n              }\r\n            }\r\n          ]\r\n        });\r\n        confirm.present().then();\r\n      })\r\n  }\r\n\r\n  getPicture() {\r\n    if (Camera['installed']()) {\r\n      this.camera.getPicture({\r\n        destinationType: this.camera.DestinationType.DATA_URL,\r\n        targetWidth: 96,\r\n        targetHeight: 96\r\n      }).then((data) => {\r\n        this.form.patchValue({ 'profilePic': 'data:image/jpg;base64,' + data });\r\n      }, (err) => {\r\n        alert('Unable to take photo');\r\n      })\r\n    } else {\r\n      this.fileInput.nativeElement.click();\r\n    }\r\n  }\r\n\r\n  processWebImage(event) {\r\n    let reader = new FileReader();\r\n    reader.onload = (readerEvent) => {\r\n\r\n      let imageData = (readerEvent.target as any).result;\r\n      this.form.patchValue({ 'profilePic': imageData });\r\n    };\r\n\r\n    reader.readAsDataURL(event.target.files[0]);\r\n  }\r\n\r\n  getProfileImageStyle() {\r\n    return 'url(' + this.form.controls['profilePic'].value + ')'\r\n  }\r\n\r\n  cancel() {\r\n    this.viewCtrl.dismiss();\r\n  }\r\n\r\n  done() {\r\n    if (!this.form.valid) { return; }\r\n    this.viewCtrl.dismiss(this.form.value);\r\n  }\r\n  private handleError(error) {\r\n    const toast = this.toast.create({ message: error, duration: 3000, position: 'top' });\r\n    toast.present();\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/main-menu/main-menu.ts"],"sourceRoot":""}